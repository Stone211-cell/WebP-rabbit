import z from "zod";

/**
 * üéØ Zod Schema ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Profile
 */
export const profileSchema = z.object({
    name: z.string().min(3, "‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£"),
    phone: z.string()
        .min(10, "‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 10 ‡∏´‡∏•‡∏±‡∏Å")
        .regex(/^[0-9]+$/, "‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô"),
})

/**
 * üéØ Zod Schema ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ (Store)
 */
export const storeSchema = z.object({
    code: z.string().optional(),
    name: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô"),
    owner: z.string().optional().nullable(),
    type: z.string().optional().nullable(),
    customerType: z.string().optional().nullable(),
    phone: z.string().optional().nullable(),
    address: z.string().optional().nullable(),
    productUsed: z.string().optional().nullable(),
    quantity: z.string().optional().nullable(),
    orderPeriod: z.string().optional().nullable(),
    supplier: z.string().optional().nullable(),
    payment: z.string().optional().nullable(),
    paymentScore: z.string().optional().nullable(),
    status: z.string().default("‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢"),
    closeReason: z.string().optional().nullable(),
})

/**
 * üéØ Zod Schema ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏ö (Visit)
 */
export const visitSchema = z.object({
    date: z.coerce.date(), // Auto convert string/number to Date
    sales: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏ó‡∏ô‡∏Ç‡∏≤‡∏¢"),
    visitType: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°"),
    masterId: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤"),
    visitCat: z.string().optional().nullable(),
    dealStatus: z.string().optional().default("‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢"),
    notes: z.any().optional().nullable(),
    order: z.any().optional().nullable(),
})

/**
 * üéØ Zod Schema ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ‡πÅ‡∏ú‡∏ô‡∏á‡∏≤‡∏ô (Plan)
 */
export const planSchema = z.object({
    date: z.coerce.date(), // Auto convert
    sales: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏ó‡∏ô‡∏Ç‡∏≤‡∏¢"),
    masterId: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤"),
    visitCat: z.string().optional().nullable(),
    notes: z.string().optional().nullable(),
    order: z.string().optional().nullable(),
})

/**
 * üéØ Zod Schema ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå (Forecast)
 */
export const forecastSchema = z.object({
    masterId: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤"),
    product: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"),
    targetWeek: z.number().min(0, "‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0"),
    targetMonth: z.number().min(0, "‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0"),
    weekStart: z.coerce.date(), // Auto convert string/number to Date
    notes: z.string().optional().nullable(),
})

/**
 * üéØ Zod Schema ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product)
 */
export const productSchema = z.object({
    code: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"),
    name: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"),
    category: z.string().optional().nullable(),
    price: z.number().min(0, "‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 0"),
    unit: z.string().optional().nullable(),
    description: z.string().optional().nullable(),
    image: z.string().optional().nullable(),
})

/**
 * üéØ Zod Schema ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠ (Purchase)
 */
export const purchaseSchema = z.object({
    round: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≠‡∏ö‡∏ö‡∏¥‡∏•"),
    date: z.coerce.date(), // Auto convert
    storeId: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤"),
    amount: z.union([z.number(), z.string()]).transform((val) => Number(val) || 0),
    status: z.string().default("pending"),
})

/**
 * üéØ Zod Schema ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ‡∏õ‡∏±‡∏ç‡∏´‡∏≤/‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Issue)
 */
export const issueSchema = z.object({
    date: z.coerce.date(), // Auto convert
    masterId: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤"),
    type: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏õ‡∏±‡∏ç‡∏´‡∏≤"),
    detail: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤"),
    recorder: z.string().min(1, "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"),
    status: z.string().default("pending"),
    notes: z.string().optional().nullable(),
})
